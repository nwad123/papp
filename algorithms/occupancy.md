# Occupancy Profiling for All Sets

In the original version of the Prefetcher-Aware Prime and Probe (PAPP) paper an 
algorithm was used to generate occupancy profiling for a single set. I extended 
this algorithm simply to include _all_ of the sets.

This algorithm originates from the [original PAPP authors][PappGithub], but has 
been extended by me.

```
m <- number of sets in target cache
n <- number of lines per set (could be greater than physical limit)
N <- number of test iterations

ES <- eviction set of size m x n

For s In 1..m Do
    For iter In 0..N Do
        For line In ES Do
            Flush ES from the cache 
            Prime set s in ES 
            Record access time to line 
        End For
    End For 
End For 
```

This algorithm is almost directly implemented in [occupancy_profile.c](../src/occupancy_profile.c). 
Results from this algorithm are generated by the `occupancy` target, generated from the main function 
in [occupancy.c](../occupancy.c), and are written to CSV files in the [results/occupancy/](../results/occupancy/)
folder. Figures are written to the [figs/occupancy](../figs/occupancy/) folder.

[PappGithub]: (https://github.com/seclab-ucr/PAPP/blob/a18a230dd941e7d0cf2290a39981172b8651eac1/Pseudocode_Algorithm.pdf)
